{% extends "base.html" %}
{% block title %}Inicio - Casa Bella{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
{% endblock %}
{% block content %}
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center min-vh-75">
                <div class="col-lg-6 text-center text-lg-start">
                    <div class="hero-logo-container mb-4">
                        <img src="{{ url_for('static', filename='images/casa-bella-logo.jpeg') }}" alt="Casa Bella" class="hero-logo rounded-circle shadow-lg">
                    </div>
                    <h1 class="display-4 fw-bold mb-3 animate-fade-in-left">
                        Bienvenida a <span class="text-custom-brand">Casa Bella</span>
                    </h1>
                    <p class="lead fw-medium mb-2">Salón y Distribuidora</p>
                    <p class="fs-5 mb-4">
                        Somos especialistas en cuidado personal y productos de belleza. 
                        Descubre nuestros servicios premium en Guavatá, Colombia.
                    </p>
                    <div class="hero-buttons d-flex flex-column flex-sm-row gap-3 justify-content-center justify-content-lg-start">
                        <a href="{{ url_for('main.citas') }}" class="btn btn-primary btn-lg px-4 py-3">
                            <i class="bi bi-calendar-check me-2"></i>Reservar Cita
                        </a>
                        <a href="{{ url_for('main.servicios') }}" class="btn btn-outline-primary btn-lg px-4 py-3">
                            <i class="bi bi-eye me-2"></i>Ver Servicios
                        </a>
                    </div>
                </div>
                <div class="col-lg-6 text-center mt-5 mt-lg-0">
                    <div class="hero-image-container position-relative animate-fade-in-right">
                        <img src="{{ url_for('static', filename='images/salon-interior.jpeg') }}" alt="Interior del salón Casa Bella" 
                             class="img-fluid rounded-3 shadow-lg hero-image">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="py-5" id="servicios">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-custom-accent mb-3">Nuestros Servicios</h2>
                <p class="lead mb-4">Especialistas en cuidado personal y productos de belleza</p>
            </div>
            
            <div class="row g-4" id="servicesContainer">
                {% for servicio in servicios %}
                <div class="col-md-6 col-lg-4">
                    <div class="card service-card h-100 border-0 shadow-sm" data-category="{{ servicio.categoria }}">
                        <div class="card-img-container">
                            <img src="{{ url_for('static', filename='images/servicio_' ~ servicio.id_servicio ~ '.jpg') }}" class="card-img-top service-image" alt="{{ servicio.nombre }}">
                            {% if servicio.popular %}
                            <div class="position-absolute top-0 start-0 m-2"><span class="badge bg-custom-accent"><i class="bi bi-star me-1"></i>Popular</span></div>
                            {% endif %}
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title text-custom-accent fw-bold">{{ servicio.nombre }}</h5>
                            <p class="card-text flex-grow-1">{{ servicio.descripcion }}</p>
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="h4 fw-bold mb-0">${{ '%0.2f'|format(servicio.precio) }}</span>
                                <span class="badge bg-custom-accent">
                                    <i class="bi bi-clock me-1"></i>{{ servicio.duracion }} min
                                </span>
                            </div>
                            <a href="{{ url_for('main.citas') }}?servicio_id={{ servicio.id_servicio }}" class="btn btn-primary">
                                <i class="bi bi-calendar-plus me-2"></i>Reservar Ahora
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Business Hours Section -->
    <section class="py-5" id="horarios">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-custom-accent mb-3">Horarios de Atención</h2>
                <p class="lead mb-4">Visítanos en nuestros horarios de atención</p>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card border-0 shadow-lg">
                        <div class="card-header bg-primary text-white text-center py-3">
                            <h4 class="mb-0"><i class="bi bi-clock me-2"></i>Horario de Atención</h4>
                        </div>
                        <div class="card-body p-4">
                            <div class="row g-3">
                                <div class="col-12">
                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                        <span class="fw-medium">Lunes</span>
                                        <span>9:00 a.m. - 7:00 p.m.</span>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                        <span class="fw-medium">Martes</span>
                                        <span>8:00 a.m. - 7:00 p.m.</span>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                        <span class="fw-medium">Miércoles</span>
                                        <span>9:00 a.m. - 7:00 p.m.</span>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                        <span class="fw-medium">Jueves</span>
                                        <span class="text-danger fw-bold">CERRADO</span>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                        <span class="fw-medium">Viernes</span>
                                        <span>9:00 a.m. - 7:00 p.m.</span>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                        <span class="fw-medium">Sábado</span>
                                        <span>9:00 a.m. - 7:00 p.m.</span>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="d-flex justify-content-between align-items-center py-2">
                                        <span class="fw-medium">Domingo</span>
                                        <span>9:00 a.m. - 6:00 p.m.</span>
                                    </div>
                                </div>
                            </div>
                            <div class="alert alert-info mt-4 mb-0">
                                <i class="bi bi-lightbulb me-2"></i>
                                <strong>Tip:</strong> Te recomendamos reservar tu cita con anticipación
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Location Section -->
    <section class="py-5" id="ubicacion">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-custom-accent mb-3">Nuestra Ubicación</h2>
                <p class="lead mb-4">Encuéntranos en Guavatá, Colombia</p>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="map-container">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3976.563789225592!2d-73.7174!3d5.9339!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e6a6e8e8e8e8e8e%3A0x9b1d2f3e4e5f6a7b!2sCalle%205%204%2C%20Guavat%C3%A1%2C%20Santander%2C%20Colombia!5e0!3m2!1ses!2sco!4v1691758400!5m2!1ses!2sco" 
                                allowfullscreen="" 
                                loading="lazy" 
                                referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="py-5" id="testimonios">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-custom-accent mb-3">Lo que dicen nuestros clientes</h2>
                <p class="lead mb-4">Testimonios reales de clientes satisfechos</p>
            </div>
            
            <div class="row g-4">
                <div class="col-md-6 col-lg-4">
                    <div class="card testimonial-card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex mb-3">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                            </div>
                            <p class="card-text mb-4">
                                "Excelente servicio de manicure, muy profesional. El resultado superó mis expectativas."
                            </p>
                            <div class="d-flex align-items-center">
                                <div class="testimonial-avatar bg-primary text-white rounded-circle me-3">
                                    AL
                                </div>
                                <div>
                                    <h6 class="mb-0 fw-bold">Ana López</h6>
                                    <small>Cliente frecuente</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card testimonial-card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex mb-3">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                            </div>
                            <p class="card-text mb-4">
                                "El ambiente es muy relajante y el personal es súper amable. Definitivamente regresaré."
                            </p>
                            <div class="d-flex align-items-center">
                                <div class="testimonial-avatar bg-primary text-white rounded-circle me-3">
                                    MG
                                </div>
                                <div>
                                    <h6 class="mb-0 fw-bold">María García</h6>
                                    <small>Cliente nueva</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card testimonial-card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex mb-3">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                            </div>
                            <p class="card-text mb-4">
                                "Los productos que venden son de excelente calidad. Mi esmalte duró más de dos semanas."
                            </p>
                            <div class="d-flex align-items-center">
                                <div class="testimonial-avatar bg-primary text-white rounded-circle me-3">
                                    CR
                                </div>
                                <div>
                                    <h6 class="mb-0 fw-bold">Carmen Ruiz</h6>
                                    <small>Cliente VIP</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Promotion Section with New Design -->
    <section class="py-5" id="promocion">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <h2 class="display-4 fw-bold mb-3 animate-glide-in">¡Bienvenidos a <span class="text-custom-brand">Casa Bella</span>!</h2>
                    <p class="lead mb-3 animate-glide-in" style="animation-delay: 0.2s;">Especialistas en cuidado personal y productos de belleza</p>
                    <p class="fs-5 mb-4 animate-glide-in" style="animation-delay: 0.4s;">Visítanos en Guavatá, Colombia y descubre nuestros servicios</p>
                    <a href="{{ url_for('main.citas') }}" class="btn btn-primary btn-lg px-5 py-3 animate-glide-in" style="animation-delay: 0.6s;">
                        <i class="bi bi-calendar-heart me-2"></i>Reservar Cita
                    </a>
                </div>
            </div>
        </div>
    </section>

    {% block scripts %}
    <script>
        // Load services dynamically
        document.addEventListener('DOMContentLoaded', () => {
            const servicesContainer = document.getElementById('servicesContainer');
            {% if servicios %}
                servicesContainer.innerHTML = '{{ servicios|tojson|safe }}'.map(service => `
                    <div class="col-md-6 col-lg-4">
                        <div class="card service-card h-100 border-0 shadow-sm" data-category="${service.category}">
                            <div class="card-img-container">
                                <img src="${service.image}" class="card-img-top service-image" alt="${service.name}">
                                ${service.popular ? '<div class="position-absolute top-0 start-0 m-2"><span class="badge bg-custom-accent"><i class="bi bi-star me-1"></i>Popular</span></div>' : ''}
                            </div>
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title text-custom-accent fw-bold">${service.name}</h5>
                                <p class="card-text flex-grow-1">${service.description}</p>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="h4 fw-bold mb-0">$${service.price.toFixed(2)}</span>
                                    <span class="badge bg-custom-accent">
                                        <i class="bi bi-clock me-1"></i>${service.duration} min
                                    </span>
                                </div>
                                <a href="{{ url_for('main.citas') }}?servicio_id=${service.id}" class="btn btn-primary">
                                    <i class="bi bi-calendar-plus me-2"></i>Reservar Ahora
                                </a>
                            </div>
                        </div>
                    </div>
                `).join('');
            {% else %}
                servicesContainer.innerHTML = '<p class="text-center">No hay servicios disponibles.</p>';
            {% endif %}
        });

        // Redirigir si el usuario está logueado
        {% if current_user.is_authenticated %}
            window.location.href = '{{ url_for("auth.cliente_dashboard" if current_user.rol == "cliente" else "auth.admin_dashboard" if current_user.rol == "admin" else "auth.empleado_dashboard") }}';
        {% endif %}
    </script>
    {% endblock %}
{% endblock %}